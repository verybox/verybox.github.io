"use strict";(self.webpackChunkverybox_tools=self.webpackChunkverybox_tools||[]).push([[786],{65420:function(e,t,s){s.d(t,{a:function(){return a}});var n=s(25091),r=s(83582);async function a(e,t){const s=n.IB.CHAIN,a={apiKey:n.sk[s].KEY,network:r.N[n.sk[s].CHAIN],maxRetries:10},i=new r.c(a),o=await i.nft.getNftsForOwner(t);let c=[];for(const n of o.ownedNfts)n.contract.address.toLowerCase()==e.toLowerCase()&&c.push(n.tokenId);return c}},84786:function(e,t,s){s.r(t);var n=s(47313),r=s(24240),a=s(82937),i=s(36368),o=s(73477),c=s(68737),l=s(25319),d=s(17201),u=s(71247),m=s(35540),h=s(25091),x=s(65420),p=s(33497),g=s(83838),f=s(32703),y=s(46417);const j=s(15372);t.default=function(){const{t:e}=(0,r.$)(),{CHAIN:t,CHAINID:s}=h.IB,[P,v]=(0,n.useState)(h.IB.RPC),[Z,A]=(0,n.useState)(new j(new j.providers.HttpProvider(P))),[T,N]=(0,n.useState)(""),[w,k]=(0,n.useState)(1),[F,C]=(0,n.useState)(2),[I,S]=(0,n.useState)(""),[b,K]=(0,n.useState)({addrStr:"",pkStr:"",pkArr:[],addrArr:[]}),[O,_]=(0,n.useState)(0),[H,L]=(0,n.useState)(0),[M,G]=(0,n.useState)({isOpen:!1,msg:"",nonce:""}),[z,D]=(0,n.useState)(""),W={inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},[B,R]=(0,n.useState)(!1),[U,E]=(0,n.useState)({type:"",msg:null}),[q,Y]=(0,n.useState)(!1);async function $(e,s,n,r,a,i){const{_sendTx:o}=(0,u.n)(Z,t),c=Q(W,[s,I,n]),l=await o({from:Z.eth.accounts.privateKeyToAccount(e).address,to:T,value:0,gasLimit:h.Lw,maxPriorityFeePerGas:w,maxFeePerGas:F,data:c,nonce:a,pk:e}),d=l.error?l.error:l.transactionHash;l.error&&l.error;G({isOpen:!0,msg:d,nonce:parseInt(1e4*Math.random())}),ee((e=>[...e,{id:e.length>0?e.length+1:1,fromAddress:s,toAddress:I,tokenId:n,status:d}]))}const J=async(e,t,s)=>await(0,x.a)(t,s),Q=(e,t)=>Z.eth.abi.encodeFunctionCall(e,t);async function V(e){let{from:t,to:s,gas:n,value:r,abi:a,parameters:i}=e;const o=Q(a,i);return await Z.eth.estimateGas({to:s,from:"0x0000000000000000000000000000000000000000",data:o}).then((e=>e)).catch((function(e){return e.message.indexOf("insufficient funds for gas * price + value")>0?{error:"INSUFFICIENT_FUNDS"}:{error:e.message}}))}const[X,ee]=(0,n.useState)([]),te=[{field:"id",hide:!1,headerAlign:"center"},{field:"fromAddress",headerName:e("collectNFT.fromAddress"),width:160},{field:"toAddress",headerName:e("collectNFT.toAddress"),width:160},{field:"tokenId",headerName:e("collectNFT.tokenId"),width:80},{field:"status",headerName:e("collectNFT.status"),width:200}],[se,ne]=(0,n.useState)({}),re=(e,t)=>{ne((s=>({...s,[e]:t})))},ae=()=>{const e=ie(T);if(re("contractAddress",!e),!e)return G({isOpen:!0,msg:"Contract Address not valid",nonce:parseInt(1e4*Math.random())}),!1;const t=ie(I);if(re("collectionTo",!t),!t)return G({isOpen:!0,msg:"Collection To Address not valid",nonce:parseInt(1e4*Math.random())}),!1;const s=oe();return re("privateKey",!s),s?!!(e&&s&&t):(G({isOpen:!0,msg:"Private Key required",nonce:parseInt(1e4*Math.random())}),!1)},ie=e=>""!=e&&Z.utils.isAddress(e),oe=()=>b.pkArr.length>0;return(0,y.jsx)(p.Z,{title:e("collectNFT.title"),children:(0,y.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(a.ZP,{container:!0,spacing:2,children:(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(a.ZP,{container:!0,spacing:2,children:(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(m.Z,{action:{changeRPCAction:e=>{e.available&&A(new j(new j.providers.HttpProvider(e.rpc)))}},data:{rpc:P}})})})})})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(a.ZP,{item:!0,xs:9,sm:6,children:(0,y.jsx)(i.Z,{error:se.contractAddress,fullWidth:!0,id:"contract_address",label:e("collectNFT.contractAddress"),variant:"outlined",size:"small",value:T,onChange:e=>{N(e.target.value)}})}),(0,y.jsx)(a.ZP,{item:!0,xs:1,children:(0,y.jsx)(o.Z,{variant:"text",onClick:e=>{N("")},children:e("collectNFT.contractAddressClear")})})]})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(a.ZP,{item:!0,xs:12,sm:3,children:(0,y.jsx)(i.Z,{fullWidth:!0,id:"maxpriorityfeepergas",label:e("collectNFT.maxpriorityfeepergas"),variant:"outlined",size:"small",type:"number",value:w,onChange:e=>{k(e.target.value)}})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,sm:3,children:(0,y.jsx)(i.Z,{fullWidth:!0,id:"maxfeepergas",label:e("collectNFT.maxFee"),variant:"outlined",size:"small",type:"number",value:F,onChange:e=>{C(e.target.value)}})})]})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(a.ZP,{item:!0,xs:9,sm:6,children:(0,y.jsx)(i.Z,{error:se.collectionTo,fullWidth:!0,id:"mint_method",label:e("collectNFT.collectionTo"),variant:"outlined",size:"small",value:I,onChange:e=>{S(e.target.value)}})}),(0,y.jsx)(a.ZP,{item:!0,xs:1,children:(0,y.jsx)(o.Z,{variant:"text",onClick:e=>{S("")},children:e("collectNFT.collectionToClear")})})]})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(l.Z,{setPk:e=>{K(e)},provider:Z,chain:t,title:e("collectNFT.importPrivateKeyTitle"),error:se.privateKey,storageKey:"mintPk"})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,style:{display:M.isOpen?" ":"none"},children:(0,y.jsx)(d.Z,{msg:M.msg,nonce:M.nonce})},M.msg),(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(a.ZP,{container:!0,spacing:2,children:(0,y.jsx)(a.ZP,{item:!0,xs:1,children:(0,y.jsx)(f.Z,{onClick:()=>{ae()&&(()=>{const e={contractAddress:T,collectionTo:I,maxPriorityFeePerGas:w,maxFeePerGas:F,addressess:b.pkArr.map((e=>Z.eth.accounts.privateKeyToAccount(e).address))};E({type:"_collectNFT",msg:e}),R(!0)})()},loading:q,variant:"contained",children:(0,y.jsx)("span",{children:e("collectNFT.execute")})})})})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,style:{height:600,textAlign:"center",width:"100%"},children:(0,y.jsx)(c._,{rows:X,columns:te})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,style:{height:30,width:"100%",textAlign:"center",display:"none"},children:"No Data"}),U.msg&&(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(g.U,{isOpen:B,msg:U.msg,okAction:()=>{if(ae()){Y(!0),ee([]);for(let e=0;e<b.pkArr.length;e++)setTimeout((async()=>{const t=e,s=Z.eth.accounts.privateKeyToAccount(b.pkArr[t]).address;let n=await Z.eth.getTransactionCount(s);const r=await J(Z,T,s);if(L(r.length),r.length>0)for(let a=0;a<r.length;a++){const i=r[a],o=await V({from:s,to:T,gas:h.Lw,value:0,abi:W,parameters:[s,T,i]});if(o.error)return;"number"==typeof o&&o<h.Lw&&($(b.pkArr[t],s,i,a,n,0),n++),a==r.length-1&&e==b.pkArr.length-1&&Y(!1)}0==r.length&&e==b.pkArr.length-1&&(G({isOpen:!0,msg:"No NFTs found",nonce:parseInt(1e4*Math.random())}),Y(!1))}),1e3)}},closeDialog:()=>{R(!1)},type:U.type})})]})})}}}]);