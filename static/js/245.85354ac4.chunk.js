"use strict";(self.webpackChunkverybox_tools=self.webpackChunkverybox_tools||[]).push([[245],{82604:function(e,t,r){r(47313);t.Z=r.p+"static/media/x2y2_color.624ca8c37d047db7b5919df00d4a43d3.svg"},17201:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(47313),a=r(82315),s=r(18104),i=r(11198),o=r(69791),c=r(62111),d=r(46417);function l(e){return(0,d.jsx)(o.Z,{...e,direction:"right"})}function m(e){const t=(0,c.Z)(),[r,o]=n.useState([]),[m,u]=n.useState(!1),[p,h]=n.useState(void 0),[x,g]=n.useState(void 0);n.useEffect((()=>{g((()=>l)),r.length&&!p?(h({...r[0]}),o((e=>e.slice(1))),u(!0)):r.length&&p&&m&&u(!1)}),[r,p,m]);const f=(e,t)=>{"clickaway"!==t&&u(!1)};return n.useEffect((()=>{o((t=>[...t,{message:e.msg,key:(new Date).getTime()}]))}),[e.nonce]),(0,d.jsx)("div",{style:{background:t.palette.secondary.main},children:(0,d.jsx)(a.Z,{open:m,autoHideDuration:4e3,onClose:f,TransitionComponent:x,TransitionProps:{onExited:()=>{h(void 0)}},message:p?p.message:void 0,action:(0,d.jsx)(n.Fragment,{children:(0,d.jsx)(s.Z,{"aria-label":"close",color:"inherit",sx:{p:.5},onClick:f,children:(0,d.jsx)(i.Z,{})})})},p?p.key:void 0)})}},25319:function(e,t,r){r.d(t,{Z:function(){return k}});var n=r(47313),a=r(24240),s=r(97319),i=r(79136),o=r(82937),c=r(36368),d=r(73477),l=r(42379),m=r(64558),u=r(11626),p=r(16157),h=r(46417);function x(e){const[t,r]=(0,n.useState)(1),a=t=>{const n=t.target.value;r(n),e.data.setGroupAction(n)};return(0,h.jsxs)(p.Z,{component:"span",sx:{p:2,border:"0px dashed grey"},children:[(0,h.jsx)(d.Z,{onClick:a,value:"1",variant:"outlined",size:"small",sx:{px:0,mr:1,border:1==t?"1px dashed #2196f3":"1px dashed grey"},children:"1"}),(0,h.jsx)(d.Z,{onClick:a,value:"2",variant:"outlined",size:"small",sx:{px:0,mr:1,border:2==t?"1px dashed #2196f3":"1px dashed grey"},children:"2"}),(0,h.jsx)(d.Z,{onClick:a,value:"3",variant:"outlined",size:"small",sx:{px:0,mr:1,border:3==t?"1px dashed #2196f3":"1px dashed grey"},children:"3"}),(0,h.jsx)(d.Z,{onClick:a,value:"4",variant:"outlined",size:"small",sx:{px:0,mr:1,border:4==t?"1px dashed #2196f3":"1px dashed grey"},children:"4"}),(0,h.jsx)(d.Z,{onClick:a,value:"5",variant:"outlined",size:"small",sx:{px:0,mr:1,border:5==t?"1px dashed #2196f3":"1px dashed grey"},children:"5"})]})}const g=(0,l.ZP)("input")({display:"none"});let f=1;function k(e){const{t:t}=(0,a.$)(),r=e.provider;let l=e.storageKey?e.storageKey:"privateKey",p=s.Z.get(l)&&s.Z.get(l).length>0?s.Z.get(l):[{addrStr:"",pkStr:"",pkArr:[],addrArr:[]},{addrStr:"",pkStr:"",pkArr:[],addrArr:[]},{addrStr:"",pkStr:"",pkArr:[],addrArr:[]},{addrStr:"",pkStr:"",pkArr:[],addrArr:[]},{addrStr:"",pkStr:"",pkArr:[],addrArr:[]}];const[k,y]=(0,n.useState)(p[0]),A=t=>{let n={};let a=t.match(/[ABCDEFabcdef0-9]{64}/g);e.singlePk&&(a=a?[a[0]]:[]),n.pkArr=a||[];let i=[];a&&(i=a.map((e=>(r.eth.accounts.privateKeyToAccount(e).address,r.eth.accounts.privateKeyToAccount(e).address)))),n.addrArr=i,n.pkStr=a.join("\r\n"),n.addrStr=i.join("\r\n"),y(n),p[f-1]=n,s.Z.set(l,[...p]),e.setPk(n)},[P,j]=n.useState(!1);return(0,n.useEffect)((()=>{var t;t=p[0],y(t),e.setPk(t)}),[]),(0,h.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,h.jsx)(o.ZP,{item:!0,xs:12,children:(0,h.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,h.jsx)(o.ZP,{item:!0,xs:9,children:(0,h.jsx)(c.Z,{style:{fontSize:8},fullWidth:!0,id:"pk",label:e.title+"("+k.pkArr.length+")",multiline:!0,rows:6,value:P?k.pkStr:k.addrStr,onChange:e=>{A(e.target.value)},disabled:!0,error:e.error})}),(0,h.jsx)(o.ZP,{item:!0,xs:3,children:(0,h.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,h.jsx)(o.ZP,{item:!0,xs:12,children:(0,h.jsxs)("label",{htmlFor:"pKeyFile",children:[(0,h.jsx)(g,{accept:"text/*",id:"pKeyFile",multiple:!0,type:"file",onChange:()=>{let e=document.querySelector("#pKeyFile").files[0];if(e){var t=new FileReader;t.readAsText(e),t.onload=function(){A(this.result),document.querySelector("#pKeyFile").value=""}}}}),(0,h.jsx)(d.Z,{variant:"outlined",component:"span",children:t("importPrivateKey.import")})]})}),(0,h.jsx)(o.ZP,{item:!0,xs:12,children:(0,h.jsx)(d.Z,{variant:"outlined",onClick:()=>{try{let t={addrStr:"",pkStr:"",pkArr:[],addrArr:[]};return y(t),p[f-1]=t,s.Z.set(l,[...p]),void e.setPk(t)}catch(t){return void(0,i.Z)("unknow error")}},disabled:0==k.pkArr.length,children:t("importPrivateKey.clear")})}),(0,h.jsx)(o.ZP,{item:!0,xs:12,children:(0,h.jsx)(m.Z,{label:t("importPrivateKey.showPrivateKey"),control:(0,h.jsx)(u.Z,{checked:P,onChange:e=>{j(e.target.checked)},inputProps:{"aria-label":"controlled"},size:"small"})})})]})})]})}),!e.singleGroup&&(0,h.jsx)(x,{data:{setGroupAction:t=>{f=t;const r=p[f-1];y(r),e.setPk(r)}}})]})}},35540:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(47313),a=r(82937),s=r(36368),i=r(73477),o=r(24240),c=r(90302),d=r(17201),l=r(25091),m=r(46417);function u(e){const{t:t}=(0,o.$)(),[r,u]=(0,n.useState)(l.IB.RPC),[p,h]=(0,n.useState)({isOpen:!1,msg:"",nonce:""});return(0,m.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,m.jsx)(a.ZP,{item:!0,xs:12,sm:6,children:(0,m.jsx)(s.Z,{fullWidth:!0,id:"rpc",label:t("setRPC.node"),variant:"outlined",size:"small",value:r,onChange:e=>{u(e.target.value)}})}),(0,m.jsxs)(a.ZP,{item:!0,xs:12,sm:5,children:[(0,m.jsx)(i.Z,{variant:"contained",onClick:()=>{(0,c.Z)(r).then((n=>{0==n?(e.action.changeRPCAction({available:!1,rpc:r,msg:`${t("setRPC.connectRPCFail")}`}),h({isOpen:!0,msg:`${t("setRPC.connectRPCFail")}`,nonce:parseInt(1e4*Math.random())})):(e.action.changeRPCAction({available:!0,rpc:r,msg:`${t("setRPC.connectRPCSuccess")} ${n} mm`}),h({isOpen:!0,msg:`${t("setRPC.connectRPCSuccess")} ${n} mm`,nonce:parseInt(1e4*Math.random())}))}))},children:t("setRPC.confirm")}),(0,m.jsx)(i.Z,{variant:"outlined",onClick:()=>{u("")},disabled:""==r,style:{marginLeft:5},children:t("setRPC.clear")})]}),(0,m.jsx)(a.ZP,{item:!0,xs:12,style:{display:p.isOpen?" ":"none"},children:(0,m.jsx)(d.Z,{msg:p.msg,nonce:p.nonce})},p.msg)]})}},65420:function(e,t,r){r.d(t,{a:function(){return s}});var n=r(25091),a=r(83582);async function s(e,t){const r=n.IB.CHAIN,s={apiKey:n.sk[r].KEY,network:a.N[n.sk[r].CHAIN],maxRetries:10},i=new a.c(s),o=await i.nft.getNftsForOwner(t);let c=[];for(const n of o.ownedNfts)n.contract.address.toLowerCase()==e.toLowerCase()&&c.push(n.tokenId);return c}},90302:function(e,t,r){r.d(t,{Z:function(){return a}});const n=r(15372);function a(e){const t=new n(new n.providers.HttpProvider(e)),r=Date.now();return t.eth.getChainId().then((e=>Date.now()-r)).catch((e=>!1))}},5245:function(e,t,r){r.r(t),r.d(t,{default:function(){return se}});var n=r(47313),a=r(82937),s=r(36368),i=r(73477),o=r(10383),c=r(91294),d=r(74897),l=r(81962),m=r(68737),u=r(42379),p=r(86227),h=r(75958),x=r(25319),g=r(24240),f=r(33497),k=r(71247),y=r(17201),A=r(35540),P=r(25091),j=JSON.parse('{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"}'),v=JSON.parse('{"opensea":{},"x2y2":{"mainnet":{"marketContract":"0x74312363e45DCaBA76c59ec49a7Aa8A65a67EeD3","erc721":"0xf849de01b080adc3a814fabe1e2087475cf2e354","erc1155":"0x024ac22acdb367a3ae52a3d94ac6649fdc1f0779","wethContract":"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","apiBase":"https://api.x2y2.org"},"goerli":{"marketContract":"0x1891EcD5F7b1E751151d857265D6e6D08ae8989e","erc721":"0x095be13D86000260852E4F92eA48dc333fa35249","erc1155":"0x675B92ed07184635dEA2EF6fB403875DfA09d74A","wethContract":"0xb4fbf271143f4fbf7b91a5ded31805e42b2208d6","apiBase":"https://goerli-api.x2y2.org"}},"looksrare":{"mainnet":{"marketContract":"0x59728544B08AB483533076417FbBB2fD0B17CE3a","erc721":"0xf42aa99F011A1fA7CDA90E5E98b277E306BcA83e","erc1155":"0xFED24eC7E22f573c2e08AEF55aA6797Ca2b3A051","wethContract":"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","apiBase":"https://api.looksrare.org"},"goerli":{"marketContract":"0xD112466471b5438C1ca2D218694200e49d81D047","erc721":"0xF8C81f3ae82b6EFC9154c69E3db57fD4da57aB6E","erc1155":"0xF2ae42e871937F4e9ffb394C5A814357C16e06d6","wethContract":"0xb4fbf271143f4fbf7b91a5ded31805e42b2208d6","apiBase":"https://api-goerli.looksrare.org"}}}'),Z=r(20663);let b;const w=P.z$;function T(e,t){const r=t;(e=>{(0,Z.S1)(w,r),b=(0,Z.Nf)(e,r)})(e);const n=async e=>{let{contractAddr:t,fromAddr:n,tokenIds:a}=e,s=[];for(let r=0;r<a.length;r++)await i(t,n,a[r]).then((function(e){e.length>0&&s.push(e[0])}));function i(e,t,n){return new Promise((async function(a,s){setTimeout((function(){!async function(e,t,n){const s=await(0,Z.L5)(r,t,e,n);a(s)}(e,t,n)}),2e3)}))}return s};return{x2y2_CheckListStatus:async e=>{let{contractAddr:t,fromAddr:r,tokenIds:a}=e;const s=await n({contractAddr:t,fromAddr:r,tokenIds:a});if(s.length>0){let e={};s.map((t=>(e={...e,[t.token.token_id]:t},t.token.token_id)));return e}return{}},x2y2_List:async function(e){let{tokenStandard:t,expirationTime:n,fromAddr:a,tokenAddress:s,tokenId:i,price:o}=e,c={network:r,signer:b,tokenAddress:s,tokenId:i,tokenStandard:t,price:o,expirationTime:n};return await(0,Z.pb)(c)},x2y2_BulkList:async function(e){let{tokenStandard:t,expirationTime:n,fromAddr:a,tokenAddress:s,tokenIds:i,price:o}=e;const c=i.map(((e,t)=>({tokenAddress:s,tokenId:e.toString(),price:o})));let d={network:r,signer:b,items:c,tokenStandard:t,expirationTime:n};return await(0,Z.Un)(d)},x2y2_Offer:async function(e){let{tokenStandard:t,expirationTime:n,fromAddr:a,tokenAddress:s,tokenId:i,price:o}=e,c={network:r,signer:buyer,isCollection:!1,tokenAddress:s,tokenId:i,tokenStandard:t,currency:v.x2y2[r].wethContract,price:o,expirationTime:n};return await(0,Z.Qx)(c)},x2y2_Buy:async function(e){let{orders:t}=e;return await(0,Z.Hj)({network:r,signer:b,order:t[0]})},x2y2_AcceptOffer:async function(e){let{tokenAddress:t,tokenId:n,price:a,fromAddr:s,maker:i,orderId:o}=e;return await(0,Z.do)({network:r,signer:seller,orderId:o,tokenId:n})},x2y2_CancelOffer:async function(e){let{tokenAddress:t,tokenId:n,price:a,fromAddr:s,maker:i,orderId:o}=e;return await cancelOffer({network:r,signer:buyer,orderId:o})},x2y2_CancelListing:async function(e){let{tokenAddress:t,tokenId:n,price:a,fromAddr:s,maker:i,orderId:o}=e;const c=await(0,Z.L5)(r,i,t,n);return await(0,Z.al)({network:r,signer:b,order:c[0]})},x2y2_LowerOrderPrice:async function(e){let{tokenStandard:t,expirationTime:n,tokenAddress:a,tokenId:s,price:i,fromAddr:o,maker:c,orderId:d}=e;const l=await(0,Z.L5)(r,c,a,s);return await(0,Z.Fp)({network:r,signer:b,order:l[0],price:i,expirationTime:l[0].end_at}),await(0,Z.L5)(r,c,a,s)}}}const S=r(31881).default;async function I(e){let{chain:t,contract:r,maker:n,cursor:a,limit:s}=e;const i=`${v.x2y2[t].apiBase}/v1/orders`,o={headers:{"x-api-key":P.z$},params:{contract:r,maker:n,cursor:a,limit:s}};return await S.get(i,o)}function C(e){let{chain:t,contract:r,maker:n,cursor:a,limit:s}=e;return new Promise((async function(e,i){setTimeout((function(){!async function(t){let{chain:r,contract:n,maker:a,cursor:s,limit:i}=t;const o=await I({chain:r,contract:n,maker:a,cursor:s,limit:i});e(o)}({chain:t,contract:r,maker:n,cursor:a,limit:s})}),250)}))}var L=r(46768),O=r(32494),E=r(75692),F=r(99456),D=r(39707);const _=r(85497);const B=r(31881).default;async function N(e){let{chain:t,isOrderAsk:r,collection:n,tokenId:a,signer:s,nonce:i,strategy:o,currency:c,price:d,startTime:l,endTime:m,status:u,pagination:p,sort:h}=e;const x=v.looksrare[t].apiBase;let g;g=p.cursor?`/api/v1/orders?pagination[first]=${p.first}&pagination[cursor]=${p.cursor}`:`/api/v1/orders?pagination[first]=${p.first}`;const f=`${x}${g}`,k={headers:{"X-Looks-Api-Key":P.dM,accept:"application/json"},params:{isOrderAsk:r,collection:n,signer:s,status:u,sort:h}};return await B.get(f,k)}function R(e){let{chain:t,isOrderAsk:r,collection:n,tokenId:a,signer:s,nonce:i,strategy:o,currency:c,price:d,startTime:l,endTime:m,status:u,pagination:p,sort:h}=e;return new Promise((async function(e,x){setTimeout((function(){!async function(t){let{chain:r,isOrderAsk:n,collection:a,tokenId:s,signer:i,nonce:o,strategy:c,currency:d,price:l,startTime:m,endTime:u,status:p,pagination:h,sort:x}=t;const g=await N({chain:r,isOrderAsk:n,collection:a,tokenId:s,signer:i,nonce:o,strategy:c,currency:d,price:l,startTime:m,endTime:u,status:p,pagination:h,sort:x});e(g)}({chain:t,isOrderAsk:r,collection:n,tokenId:a,signer:s,nonce:i,strategy:o,currency:c,price:d,startTime:l,endTime:m,status:u,pagination:p,sort:h})}),250)}))}async function z(e,t){const r=`${v.looksrare[e].apiBase}/api/v1/orders/nonce`,n={headers:{accept:"application/json"},params:{address:t}};return(await B.get(r,n)).data.data}var $=r(82604);var K=r.p+"static/media/looksrare_green.60387c7a85c3b7057590ba8a7f5f02b6.svg",M=r(32703),W=r(65420),G=r(96603);function H(e){return new Promise((t=>setTimeout(t,e)))}var Y=r(7081),X=r(66382),J=r(71235),V=r(54634),q=r(5448),U=r(42669),Q=r(62111),ee=r(46417);function te(e){const t=(0,Q.Z)(),{t:r}=(0,g.$)(),[a,o]=n.useState(!1),[c,d]=n.useState(),l=()=>{e.closeDialog(),o(!1)};return n.useEffect((()=>{o(e.isOpen)}),[e]),(0,ee.jsx)("div",{children:(0,ee.jsxs)(Y.Z,{open:a,onClose:l,children:[(0,ee.jsx)(q.Z,{sx:{fontSize:"24px",borderBottom:"solid 1px",borderBottomColor:t.palette.grey[300]},children:r("commonDialogs.confirmation")}),(0,ee.jsxs)(J.Z,{sx:{mt:1,mr:2,mb:4,ml:2},children:[(0,ee.jsxs)(U.Z,{gutterBottom:!0,sx:{mt:1,mb:1,fontSize:14,color:t.palette.primary.main},children:[(0,ee.jsx)("span",{style:{color:t.palette.grey[500]},children:"ContractAddress: "}),e.msg.contractAddress]}),(0,ee.jsx)(U.Z,{gutterBottom:!0,sx:{mb:1,fontSize:14,color:t.palette.primary.main},children:(0,ee.jsxs)("span",{style:{color:t.palette.grey[500]},children:["Addressess: "," (",e.msg.addressess.length,")"]})}),e.msg.addressess&&(0,ee.jsx)("div",{style:{padding:5,paddingTop:10,paddingBottom:10,backgroud:"#eeeeee",border:"solid 1px",borderColor:t.palette.primary.main,fontSize:14,color:t.palette.primary.main,borderRadius:10},children:e.msg.addressess.map((e=>(0,ee.jsx)(U.Z,{gutterBottom:!0,style:{margin:0,fontSize:14,color:t.palette.primary.main},children:e},e)))}),(0,ee.jsxs)(U.Z,{gutterBottom:!0,sx:{mt:2,mb:1,fontSize:14,color:t.palette.primary.main},children:[(0,ee.jsx)("span",{style:{color:t.palette.grey[500]},children:"ListPeriod: "}),function(e){var t=parseInt(e),r=0,n=0,a=0;t>=60&&(r=parseInt(t/60),t=parseInt(t%60),r>=60&&(n=parseInt(r/60),r=parseInt(r%60),n>=24&&(a=parseInt(n/24),n=parseInt(n%24))));var s="";return t>0&&(s=parseInt(t)+" Seconds "),r>0&&(s=parseInt(r)+" Minutes "+s),n>0&&(s=parseInt(n)+" Hours "+s),a>0&&(s=parseInt(a)+" Days "+s),s}(e.msg.listPeriod)]}),(0,ee.jsxs)(U.Z,{gutterBottom:!0,sx:{mb:1,fontSize:14,color:t.palette.primary.main},children:[(0,ee.jsx)("span",{style:{color:t.palette.grey[500]},children:"PriceType: "}),e.msg.priceType]}),(0,ee.jsxs)(U.Z,{gutterBottom:!0,sx:{mb:1,fontSize:14,color:t.palette.primary.main},children:[(0,ee.jsx)("span",{style:{color:t.palette.grey[500]},children:"Price: "}),(0,ee.jsx)("span",{children:e.msg.samePrice}),(0,ee.jsx)("span",{style:{color:t.palette.grey[500]},children:" Ether"})]}),(0,ee.jsxs)(U.Z,{gutterBottom:!0,sx:{mb:1,fontSize:14,color:t.palette.primary.main},children:[(0,ee.jsx)("span",{style:{color:t.palette.grey[500]},children:"ListAmount: "}),e.msg.listAmount," "," Per wallet"]}),(0,ee.jsxs)(U.Z,{gutterBottom:!0,sx:{mb:1,fontSize:14,fontweight:600,color:t.palette.secondary.main},children:[(0,ee.jsx)("span",{style:{color:t.palette.grey[500]},children:"Market: "}),(0,ee.jsx)("span",{style:{backgroundColor:t.palette.secondary.light,borderRadius:6,paddingLeft:4,paddingRight:4},children:e.msg.market})]}),(0,ee.jsxs)(V.Z,{sx:{mt:2,display:"none"},children:["To confirm above data,please enter your selected ",(0,ee.jsxs)("span",{style:{color:t.palette.secondary.main},children:[" ",e.msg.market," "]})," below."]}),(0,ee.jsx)(s.Z,{sx:{display:"none"},margin:"dense",id:"name",label:"Select Market",type:"text",fullWidth:!0,variant:"standard",onChange:e=>{d(e.target.value)}})]}),(0,ee.jsxs)(X.Z,{children:[(0,ee.jsx)(i.Z,{onClick:l,children:"Cancel"}),(0,ee.jsx)(i.Z,{onClick:()=>{o(!1),l(),e.okAction()},children:"Ok"})]})]})})}const re=r(15372);(0,u.ZP)("input")({display:"none"});let ne,ae=[];var se=function(){const{t:e}=(0,g.$)(),{CHAIN:t,CHAINID:r}=P.IB;let u="erc721";const[Z,b]=(0,n.useState)(P.IB.RPC),[w,S]=(0,n.useState)(new re(new re.providers.HttpProvider(Z))),[B,Y]=(0,n.useState)({addrStr:"",pkStr:"",pkArr:[],addrArr:[]}),[X,J]=(0,n.useState)("looksrare"),[V,q]=(0,n.useState)(!1),[U,Q]=(0,n.useState)({type:"",msg:null}),[se,ie]=n.useState(!1),[oe,ce]=(0,n.useState)({contractAddress:"",maxPriorityFeePerGas:1,maxFeePerGas:20,ethValue:0,orderPeriod:86400,priceType:1,samePrice:1,startPrice:null,endPrice:null,stepValue:null,nftAmount:1}),de=e=>{le(e.target.id,e.target.value)},le=(e,t)=>{const r={[e]:t};ce((e=>({...e,...r})))},[me,ue]=(0,n.useState)({isOpen:!1,msg:"",nonce:"",nonce:""}),pe=async e=>{const r=await he(e),n=v[X][t][u],a=w.eth.accounts.privateKeyToAccount(e).address;let s=(await(0,W.a)(oe.contractAddress,a)).reverse().map((e=>parseInt(e)));s.length>50&&(s=s.slice(0,50));const i=await ge(e,oe.contractAddress,a,50,s),o=xe(i);let c=s.filter((function(e){return-1==o.indexOf(e)}));if(0==c.length)return ue({isOpen:!0,msg:`No NFT need to be list for ${a}`,nonce:parseInt(1e4*Math.random())}),void ie(!1);if(!oe.nftAmount)return;c=c.slice(0,oe.nftAmount);let d=await w.eth.getTransactionCount(a);1==r?(ue({isOpen:!0,msg:"Approved",nonce:parseInt(1e4*Math.random())}),c.length>0?(fe(e,a,oe.contractAddress,c,oe.samePrice),ie(!1)):ue({isOpen:!0,msg:"No nft need to be list.",nonce:parseInt(1e4*Math.random())})):(ue({isOpen:!0,msg:"Not Approved, start approve...",nonce:parseInt(1e4*Math.random())}),async function(e,r,n,a){const{_sendTx:s}=(0,k.n)(w,t),i=ye(j,[r,!0]),o=oe.contractAddress,c=w.eth.accounts.privateKeyToAccount(e).address;await s({from:c,to:o,value:0,gasLimit:P.Lw,maxPriorityFeePerGas:oe.maxPriorityFeePerGas,maxFeePerGas:oe.maxFeePerGas,data:i,nonce:n,pk:e});ue({isOpen:!0,msg:`${c} Approving...`,nonce:parseInt(1e4*Math.random())})}(e,n,d).then((async t=>{let r=!1;let n=0;do{H(500),r=await he(e),n++}while(!r&&n<20);c.length>0?(fe(e,a,oe.contractAddress,c,oe.samePrice),ie(!1)):ue({isOpen:!0,msg:"No nft need to be list.",nonce:parseInt(1e4*Math.random())})})).catch((e=>{})))},he=async e=>{const r=w.eth.accounts.privateKeyToAccount(e).address,n=oe.contractAddress,a=v[X][t][u],s={to:n,data:w.eth.abi.encodeFunctionSignature("isApprovedForAll(address,address)")+w.eth.abi.encodeParameters(["address","address"],[r,a]).slice(2)},i=await w.eth.call(s).then((e=>e)).catch((e=>{}));return w.utils.hexToNumber(`${i}`)},xe=e=>{switch(X){case"opensea":default:break;case"looksrare":return(e=>{let t=[];for(let r of e)t=[...t,parseInt(r.tokenId)];return t})(e);case"x2y2":return(e=>{let t=[];if(e)for(let r of e)t=[...t,parseInt(r.token.token_id)];return t})(e)}},ge=async(e,r,n,a,s)=>{switch(X){case"opensea":default:break;case"looksrare":return async function(e){let{chain:t,contract:r,fromAddr:n,limit:a}=e,s=[],i="",o=1;var c=[];const d=await N({chain:t,isOrderAsk:!0,collection:r,tokenId:"",signer:n,nonce:"",strategy:"",currency:"",price:{min:"",max:""},startTime:"",endTime:"",status:["VALID"],pagination:{first:20},sort:"PRICE_DESC"});for(20==d.data.data.length&&(i=d.data.data[d.data.data.length-1].hash),s=d.data.data,o+=1,c=d.data.data;20==c.length&&o<6&&i;){c=[];let e=await R({chain:t,isOrderAsk:"true",collection:r,tokenId:"",signer:n,nonce:"",strategy:"",currency:"",price:{min:"",max:""},startTime:"",endTime:"",status:["VALID"],pagination:{first:20,cursor:i},sort:"PRICE_DESC"});e.data.data&&e.data.data.map((e=>{s.push(e)})),i=s[s.length-1].hash,o+=1,c=e.data.data}return s}({chain:t,contract:r,fromAddr:n,limit:a});case"x2y2":const{x2y2_CheckListStatus:i}=T(e,t);return async function(e){let{chain:t,contract:r,fromAddr:n,limit:a,tokenIds:s}=e,i=[];const o=await I({chain:t,contract:r,maker:n,cursor:"",limit:a});i=o.data.data;var c=o.data.next;let d=1;for(;c&&d<5;){let e=await C({chain:t,contract:r,maker:n,cursor:c,limit:a});e.data.data&&e.data.data.map((e=>{i.push(e)})),d+=1,c=e.data.next}return i}({chain:t,contract:r,fromAddr:n,limit:a,tokenIds:s})}};async function fe(e,r,n,a,s){switch(X){case"opensea":default:break;case"looksrare":return async function(e,r,n,a,s){for(let i=0;i<a.length;i++){const s=a[i];ne=await z(t,r),new Promise(((t,a)=>{setTimeout((()=>{ke(e,r,n,s,oe.samePrice),t("ok")}),1e3)})),i==a.length-1&&ie(!1)}}(e,r,n,a);case"x2y2":return async function(e,r,n,a,s){const{x2y2_BulkList:i}=T(e,t),o=Math.floor(Date.now()/1e3)+10+oe.orderPeriod;let c={fromAddr:r,tokenAddress:n,tokenIds:a,tokenStandard:u,price:w.utils.toWei(s.toString()),expirationTime:o};await i(c);return a.forEach((e=>{ve({fromAddress:r,tokenId:e,market:X,status:"\u2713 list success"})})),"succcess"}(e,r,n,a,s)}}async function ke(e,r,n,a,s){const{looksrare_List:i}=await async function(e,t){const r=L.HL.GOERLI,n=L.Xg[r],a=new O.r6(P.IB.RPC),s=new E.w5(e).connect(a),i=await s.getAddress();return{looksrare_List:async function(e){let{orderPeriod:a,tokenStandard:o,isOrderAsk:c,fromAddr:d,collection:l,price:m,tokenId:u,nonce:p}=e;const h=Math.floor(Date.now()/1e3),x=h+a;let g={isOrderAsk:!0,signer:i,collection:l,price:m,tokenId:u,amount:"1",strategy:n.STRATEGY_STANDARD_SALE,currency:n.WETH,nonce:p,startTime:h,endTime:x,minPercentageToAsk:"9800",params:[]};const{domain:f,value:k,type:y}=(0,L.Eh)(i,r,g),A=await s._signTypedData(f,y,k),j=`${v.looksrare[t].apiBase}/api/v1/orders`,Z={method:"POST",headers:{accept:"application/json","content-type":"application/json","X-Looks-Api-Key":P.dM},body:JSON.stringify({signature:A,tokenId:u,collection:l,strategy:n.STRATEGY_STANDARD_SALE,currency:n.WETH,signer:i,isOrderAsk:!0,nonce:p,amount:"1",price:m,startTime:h,endTime:x,minPercentageToAsk:"9800",params:[]})};try{const e=await _(j,Z);return await e.json()}catch(b){return err}},looksrare_LowerPrice:async function(e,a){let o={isOrderAsk:!0,signer:e.maker,collection:e.token.contract,price:a,tokenId:e.token.token_id,amount:"1",strategy:n.STRATEGY_STANDARD_SALE,currency:n.WETH,nonce:e.nonce,startTime:Math.floor(Date.now()/1e3),endTime:e.end_at,minPercentageToAsk:"9800",params:[]};const{domain:c,value:d,type:l}=(0,L.Eh)(i,r,o),m=await s._signTypedData(c,l,d),u=`${v.looksrare[t].apiBase}/api/v1/orders`,p={method:"POST",headers:{accept:"application/json","content-type":"application/json","X-Looks-Api-Key":P.dM},body:JSON.stringify({signature:m,tokenId:o.tokenId,collection:o.collection,strategy:n.STRATEGY_STANDARD_SALE,currency:n.WETH,signer:o.signer,isOrderAsk:!0,nonce:o.nonce,amount:"1",price:o.price,startTime:o.startTime,endTime:o.endTime,minPercentageToAsk:"9800",params:[]})};try{const e=await _(u,p);return await e.json()}catch(h){return err}},looksrare_Buy:async function(e){try{let t={r:e.r,s:e.s,v:e.v,isOrderAsk:!0,signer:e.maker,collection:e.token.contract,price:e.price,tokenId:e.token.token_id,amount:"1",strategy:n.STRATEGY_STANDARD_SALE,currency:n.WETH,nonce:e.nonce,startTime:e.created_at,endTime:e.end_at,minPercentageToAsk:"9800",params:[]};const{encodedParams:r}=(0,L.bR)(t.params);t.params=r;const a={isOrderAsk:!1,taker:i,price:t.price,tokenId:t.tokenId,minPercentageToAsk:t.minPercentageToAsk,params:r},o=new F.vU(L.Dz),c=new D.CH(n.EXCHANGE,o,s);return await c.functions.matchAskWithTakerBid(a,t,{gasLimit:P.Lw})}catch(t){}}}}(e,t),o={orderPeriod:oe.orderPeriod,tokenStandard:u,isOrderAsk:!0,fromAddr:r,collection:n,price:w.utils.toWei(s.toString()),tokenId:a.toString(),nonce:ne};ne++;const c=await i(o);c.success&&ue({isOpen:!0,msg:`${c.data.tokenId} list successfully`,nonce:parseInt(1e4*Math.random())}),ve({fromAddress:r,tokenId:a,market:X,status:"\u2713 list success"})}const ye=(e,t)=>w.eth.abi.encodeFunctionCall(e,t),[Ae,Pe]=(0,n.useState)([]),je=[{field:"id",hide:!1,headerAlign:"center"},{field:"fromAddress",headerName:e("collectNFT.fromAddress"),width:160},{field:"tokenId",headerName:e("collectNFT.tokenId"),width:120},{field:"market",headerName:"market",width:120},{field:"status",headerName:e("collectNFT.status"),width:200}],ve=e=>{let{fromAddress:t,tokenId:r,market:n,status:a}=e;const s={id:ae.length+1,fromAddress:(i=t,o=8,c=8,i.length>o+c?`${i.substring(0,o)}...${i.substring(i.length-c)}`:i),tokenId:r,market:n,status:a};var i,o,c;let d=[...ae];d.push(s),ae=[...d],Pe([]),Pe(ae)},[Ze,be]=(0,n.useState)({}),we=(e,t)=>{be((r=>({...r,[e]:t})))},Te=async()=>{const e=Se(oe.contractAddress);if(we("contractAddress",!e),!e)return ue({isOpen:!0,msg:"Please set a valid contract address",nonce:parseInt(1e4*Math.random())}),!1;if(e){const e=await(0,G.zz)(w,oe.contractAddress);u=e?"erc721":"erc1155"}const t=Ie();if(we("privateKey",!t),!t)return ue({isOpen:!0,msg:"Please set at least a private key",nonce:parseInt(1e4*Math.random())}),!1;const r=function(e){if("NaN"==parseFloat(e).toString())return!1;if(0==e)return!1;return!0}(oe.samePrice);if(we("samePrice",!r),!r)return ue({isOpen:!0,msg:"Please set a valid price",nonce:parseInt(1e4*Math.random())}),!1;const n=Ce(X);return we("market",!n),n?!!(e&&t&&r&&n):(ue({isOpen:!0,msg:"Please set a market",nonce:parseInt(1e4*Math.random())}),!1)},Se=e=>""!=e&&w.utils.isAddress(e),Ie=()=>B.pkArr.length>0,Ce=()=>"Not selected"!=X;return(0,ee.jsx)(f.Z,{title:"List NFT",children:(0,ee.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,ee.jsx)(a.ZP,{item:!0,xs:12,children:(0,ee.jsx)(a.ZP,{container:!0,spacing:2,children:(0,ee.jsx)(a.ZP,{item:!0,xs:12,children:(0,ee.jsx)(A.Z,{action:{changeRPCAction:e=>{e.available&&S(new re(new re.providers.HttpProvider(e.rpc)))}},data:{rpc:Z}})})})}),(0,ee.jsx)(a.ZP,{item:!0,xs:12,children:(0,ee.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,ee.jsx)(a.ZP,{item:!0,xs:9,children:(0,ee.jsx)(s.Z,{fullWidth:!0,id:"contractAddress",label:"\u5408\u7ea6\u5730\u5740:",variant:"outlined",size:"small",value:oe.contractAddress,onChange:de,error:Ze.contractAddress})}),(0,ee.jsx)(a.ZP,{item:!0,xs:1,children:(0,ee.jsx)(i.Z,{variant:"text",onClick:()=>{le("contractAddress","")},children:e("mintNFT.contractAddressClear")})})]})}),(0,ee.jsx)(a.ZP,{item:!0,xs:12,children:(0,ee.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,ee.jsx)(a.ZP,{item:!0,xs:2,children:(0,ee.jsx)(s.Z,{fullWidth:!0,id:"maxPriorityFeePerGas",label:"\u5c0f\u8d39",variant:"outlined",size:"small",type:"number",value:oe.maxPriorityFeePerGas,onChange:de})}),(0,ee.jsx)(a.ZP,{item:!0,xs:2,children:(0,ee.jsx)(s.Z,{fullWidth:!0,id:"maxFeePerGas",label:"Max Fee",variant:"outlined",size:"small",type:"number",value:oe.maxFeePerGas,onChange:de})})]})}),(0,ee.jsx)(a.ZP,{item:!0,xs:12,children:(0,ee.jsx)(x.Z,{setPk:e=>{Y(e)},provider:w,chain:t,title:e("mintBy0xData.importPrivateKeyTitle"),error:Ze.privateKey,storageKey:"mintPk"})}),(0,ee.jsx)(a.ZP,{item:!0,xs:12,children:(0,ee.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,ee.jsx)(a.ZP,{item:!0,xs:2,children:(0,ee.jsxs)(o.Z,{fullWidth:!0,children:[(0,ee.jsx)(c.Z,{id:"orderPeriodLabel",size:"small",children:"List Period"}),(0,ee.jsxs)(d.Z,{id:"orderPeriod",label:"List Period",labelId:"orderPeriodLabel",size:"small",value:oe.orderPeriod,onChange:e=>de({target:{id:"orderPeriod",value:e.target.value}}),children:[(0,ee.jsx)(l.Z,{value:43200,children:"12 Hours"}),(0,ee.jsx)(l.Z,{value:86400,children:"1 day"}),(0,ee.jsx)(l.Z,{value:259200,children:"3 days"}),(0,ee.jsx)(l.Z,{value:604800,children:"7 days"}),(0,ee.jsx)(l.Z,{value:864e3,children:"10 days"})]})]})}),(0,ee.jsx)(a.ZP,{item:!0,xs:2,children:(0,ee.jsxs)(o.Z,{fullWidth:!0,children:[(0,ee.jsx)(c.Z,{id:"priceTypeLabel",size:"small",children:"Price Type"}),(0,ee.jsx)(d.Z,{id:"priceType",label:"Price Type",labelId:"priceTypeLabel",size:"small",value:oe.priceType,onChange:e=>de({target:{id:"priceType",value:e.target.value}}),children:(0,ee.jsx)(l.Z,{value:1,children:"SamePrice"})})]})}),(0,ee.jsx)(a.ZP,{item:!0,xs:2,children:(0,ee.jsx)(s.Z,{error:Ze.samePrice,fullWidth:!0,id:"samePrice",label:"Same Price",variant:"outlined",size:"small",value:oe.samePrice,onChange:de})}),(0,ee.jsx)(a.ZP,{item:!0,xs:2,children:(0,ee.jsxs)(o.Z,{fullWidth:!0,children:[(0,ee.jsx)(c.Z,{id:"nftAmountLabel",size:"small",children:"List front ? NFTs"}),(0,ee.jsxs)(d.Z,{id:"nftAmount",label:"List front ? NFTs",labelId:"nftAmountLabel",size:"small",value:oe.nftAmount,onChange:e=>de({target:{id:"nftAmount",value:e.target.value}}),children:[(0,ee.jsx)(l.Z,{value:9999,children:"All"}),(0,ee.jsx)(l.Z,{value:1,children:"1"}),(0,ee.jsx)(l.Z,{value:2,children:"2"}),(0,ee.jsx)(l.Z,{value:3,children:"3"}),(0,ee.jsx)(l.Z,{value:4,children:"4"}),(0,ee.jsx)(l.Z,{value:5,children:"5"}),(0,ee.jsx)(l.Z,{value:6,children:"6"}),(0,ee.jsx)(l.Z,{value:7,children:"7"}),(0,ee.jsx)(l.Z,{value:8,children:"8"}),(0,ee.jsx)(l.Z,{value:9,children:"9"}),(0,ee.jsx)(l.Z,{value:10,children:"10"})]})]})})]})}),(0,ee.jsx)(a.ZP,{item:!0,xs:12,children:(0,ee.jsx)(a.ZP,{container:!0,spacing:2,children:(0,ee.jsx)(a.ZP,{item:!0,xs:3,children:(0,ee.jsxs)(o.Z,{fullWidth:!0,children:[(0,ee.jsx)(c.Z,{id:"marketLabel",size:"small",children:"Market"}),(0,ee.jsxs)(d.Z,{id:"market",label:"Market",labelId:"marketLabel",size:"small",value:X,onChange:e=>{J(e.target.value)},error:Ze.market,children:[(0,ee.jsx)(l.Z,{value:"Not selected",children:"Not selected"}),(0,ee.jsx)(l.Z,{value:"x2y2",children:(0,ee.jsx)(h.Z,{sx:{borderWidth:0,px:1},avatar:(0,ee.jsx)(p.Z,{alt:"x2y2",src:$.Z}),label:"x2y2",variant:"outlined"})}),(0,ee.jsx)(l.Z,{value:"looksrare",children:(0,ee.jsx)(h.Z,{sx:{borderWidth:0,px:1},avatar:(0,ee.jsx)(p.Z,{alt:"looksrare",src:K}),label:"looksrare",variant:"outlined"})})]})]})})})}),(0,ee.jsx)(a.ZP,{item:!0,xs:12,children:(0,ee.jsx)(a.ZP,{container:!0,spacing:2,children:(0,ee.jsx)(a.ZP,{item:!0,xs:1,children:(0,ee.jsx)(M.Z,{onClick:async()=>{if(!samePrice)return;await Te()&&(()=>{const e={contractAddress:oe.contractAddress,addressess:B.pkArr.map((e=>w.eth.accounts.privateKeyToAccount(e).address)),listPeriod:oe.orderPeriod,priceType:1==oe.priceType?"samePrice":"stepPrice",samePrice:oe.samePrice,listAmount:oe.nftAmount,market:X};Q({type:"confirmation",msg:e}),q(!0)})()},loading:se,variant:"contained",children:"List"})})})}),U.msg&&(0,ee.jsx)(a.ZP,{item:!0,xs:12,children:(0,ee.jsx)(te,{isOpen:V,msg:U.msg,okAction:async()=>{if(!samePrice)return;if(!await Te())return;ae=[],ie(!0);const e=B.pkArr;for(let t=0;t<e.length;t++){let r=e[t];await pe(r)}},closeDialog:()=>{q(!1)}})}),(0,ee.jsx)(a.ZP,{item:!0,xs:12,style:{height:600,width:"100%"},children:(0,ee.jsx)(m._,{rows:Ae,columns:je})}),(0,ee.jsx)(a.ZP,{item:!0,xs:12,style:{display:me.isOpen?" ":"none"},children:(0,ee.jsx)(y.Z,{msg:me.msg,nonce:me.nonce})},me.msg)]})})}}}]);